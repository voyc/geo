

	// plateaux  #ff9
	// swamps    #0f0
	// foothills #3c3
	// valleys   #0f0
	// plains    #0f0
	// tundras   #ffe6ff

cities   two dozen historical city names and some notes
countrynames  name and id only
foothills  three items, "featureCollection"
plateaux  features
rivers  feature collection
seas  lists and notes, no data
swamps  three records, features
tundras  4 features
valleys  6 features

deserts   done
highmountains  done
lowmountains   done
mediummountains  done
plains   done
canvas visible
treasure  done
empire    done
worldtopo  done: 2 objects, land and countries

	treasure
	hero
	hittest

svg tips

canvas tips
	rgba is slow, use only when necessary
	keep layers separate
		for independent show/hide
		setup ctx ahead of time, not at draw time
		while it is tempting to put multiple datatypes on one layer 
		this may change for scaling

	/* todo: Mercator stitch
		during iteratee project for polygon object
		objects going across the antimeridian project normally
		objects going across the left (or right) edge must be duplicated
			project one onto the right edge
			project the other onto the left edge 
		project() is called by the iterator
		the iterator does the ctx fill() and stroke() commands
		thererfore, the data need not be modified, it can all be handled during drawing
			project() must return null when a point is off screen
			drawer must split the object on all gaps of null points
			or
			drawer must note when a line crosses the boundary
	*/


	// medium mountains ctx.fillStyle = '#963'; ctx.beginPath(), path.ctx(ctx)(voyc.data.mediummountains), ctx.fill();
	// low mountains ctx.fillStyle = '#060'; ctx.beginPath(), path.ctx(ctx)(voyc.data.lowmountains), ctx.fill();
	// plateaux ctx.fillStyle = '#ff9'; ctx.beginPath(), path.ctx(ctx)(voyc.data.plateaux), ctx.fill();
	// swamps ctx.fillStyle = '#0f0'; ctx.beginPath(), path.ctx(ctx)(voyc.data.swamps), ctx.fill();
	// foothills ctx.fillStyle = '#3c3'; ctx.beginPath(), path.ctx(ctx)(voyc.data.foothills), ctx.fill();
	// valleys ctx.fillStyle = '#0f0'; ctx.beginPath(), path.ctx(ctx)(voyc.data.valleys), ctx.fill();
	// plains ctx.fillStyle = '#0f0'; ctx.beginPath(), path.ctx(ctx)(voyc.data.valleys), ctx.fill();
	// tundras ctx.fillStyle = '#ffe6ff'; ctx.beginPath(), path.ctx(ctx)(window['voyc']['data']['tundras']), ctx.fill();
todo:
rivers
features
cleanup
palette layers on/off

https://sketch.io/sketchpad/?

https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Optimizing_canvas

bug:
when globe is upside down, 
	up/down mouse dragging movement is opposite of globe spin

note:
in our data, E and N are positive
in our projection code, E and S are positive
we need to flip Latitude sign, where do we do that?


GeoIterator
4 looping methods, hierarchical
	iterateCollection
		iterateGeometry
			iteratePolygon
				iterateLineInPoly
					doPointInPoly
			iterateLine
					doPointInLine
			doPoint

before and after loop methods
prototype iteratee methods
	collectionStart()
	collectionEnd()
	geometryStart()
	geometryEnd()
	polygonStart()
	polygonEnd()
	lineStart()
	lineEnd()
	point()

layerCustomPoly
layerCustomLine
layerCustomPoint

		
7 sub classes, ie 7 prototype objects
iterateePolygonClipping
iterateeInit
iterateeDrawPerGeometry
iterateeLineSVG
iterateeCounter
iterateeHitTest
iterateeHitTestPoint

land, countries, sketch: polygonclipping
empire: polygonclipping + drawpergeometry
treasure: iteratepoint
grid: iterateline
feature: polygonclipping
river: line
deserts, mountains, empire: init

when mouse moves off the board, blank out the whereami
bug in spin after drag


land: iterateCollection, passing iterateeLand which is derived from polygonclipping
rivers: iterateCollection, passing iterateeRiver, derived from Line
riversanim: iterateCollection, passing iterateeRiverAnim, derived from ?

all layers start with iterateCollection()


pencil
point
line
polygon
finish/name
multi
gg
after resize, recalc the point overlap threshold as percentage of diagonal distance of container div
	width by height, a2 + b2 = c2, root of sum of the squares
	gives length of diagonal
	one point is identical to another
	when points are overlaid, is it the same point or a different one?
	1% of the diagonal
	100 x 100, diagonal=130, 1%=1.3
	1000 x 1000, diagonal=1300, 1%=13
	!! dont bother with this now


x block all mouse/touch attach except new hud stuff
	x reorg attachments with single point on/off

attach/connect hud/publish to world and sketch
	x sketch touch
	sketch mouse
	sketch buttons
	world touch
	world mouse
	world buttons

replace sketch addPoint(pt) with addCoord(co), call invert() from Hud (or sketch?)
in sketch draw(), call project() for each point





rename geosketch:geo, sketchpad:sketch
	rename repository
	recreate subdomain
	keep two files named sketch: one in jslib, one in geo, or rename one of them to draw or pad
	what about letting the future of voyc dovetail into geo, global
	geo.voyc.com
	global.voyc.com - to be folded into geo
	let geosketch be the authoring tool for global and plunder
	rename geo to GeoMath or GeoLib
element pad has no purpose. remove id, or rename to "container"

save layers in these categories:
Choke point
funnel
Threshold
Pressure point
Nexus, Knot
Single lifespan empire
CEO
Geographic, chronological, cultural
Continents, canals, passages

isms
cracy and archy
categorical thinking
government, economics, religious, technology, cultural?

the chosen people, the one, 

UI: world vs sketch vs plunder
plunder: you move the character, directions are relative to him
world: you drag the land, directions are relative to him

sketch
	mouse (left btn)
	
spin (pan)j
	keybd (arrow keys, shift for gamma spin)
	mouse (middle btn)

zoom
	keybd (shift + up,down arrow keys)
	mouse wheel
	button
	slider

time
	keybd (ctrl + right,left arrow keys)
	button
	slider



x Drawing vs spinning 
animate Globe vs Mercator 
Drawing upgrades
wheel zoom to cursor
zoom buttons and sketch drawing do not work on android
time buttons from +/- to right/left.

globe icon
palette icon, pen

- sketch upgrade
	- each object must be a discrete event, with points, size, color, name, begin, end
	- multipolygon?
	 -after drawing, object must become part of map and move along with it
	 - save objects
	 - create layers
	 - make a layer the currently edited one, save objects into chosen layer

- Drawing upgrades
	- Palettes
	- Line drawing by palette or alt key
	- Line is one side of a polygon
	- Fill
	- Mask land
	- mask water

- edit map layers
- create new custom layers


draw | drag

menu:
        user mgmt
	sketch
        projectio
        map palette
        sketch palette
        settings

points
line
polygon
end line
close polygon
cancel line/polygon
save object
select layer

mode: points, line, polygon
actions: keep, erase, save
layer: choose from menu, create new layer
size:
color:

point medalions

   <!--
                        Point
                        Line
                        Shortest line
                        Polygon
                        Oval, circle, rectangle
                        Fill
                        Fill mask - interact with world layers
                        Save, name
                        Name each object, each layer
                        Enter date range for each object
                        Choose layer to draw in, w new layer
                        
                        
                        Pallette
                        Color
                        Pen, brush size
                        
                        Save into custom layers
                        
                        World palette
                        Layers checkbox on off, color Swatch 
                        Multicolor option
                        HUD element checkboxes
                        
                        Globe, Mercator radiobox
                        -->

