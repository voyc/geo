<!doctype html>
<html>
	<head>
		<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
		<meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=1'>
		<title>GeoSketch</title>
		<style>[hidden] {display:none ! important;}</style>

		<link href='minimal/normaleyes.css' rel='stylesheet' type='text/css'></link>
		<link href='minimal/minimal.css' rel='stylesheet' type='text/css'></link>
		<link href='minimal/theme/mahagony.css' rel='stylesheet' type='text/css'></link>
		<link href='icon/icon.css' rel='stylesheet' type='text/css'></link>
		<link href='css/geosketch.css' rel='stylesheet' type='text/css'></link>
		<link href='css/world.css' rel='stylesheet' type='text/css'></link>
		<link href='css/hud.css' rel='stylesheet' type='text/css'></link>

		<script src="js/namespace.js"></script>
		<script src="js/geosketch.js"></script>
		<script src='js/sketchpad.js'></script>
		<script src="js/world.js"></script>
		<script src="js/hud.js"></script>
		<script src="js/view.js"></script>
		<script src="js/user.js"></script>
		<script src="js/account.js"></script>
		<script src="js/accountview.js"></script>
		<script src="geo/geo.js"></script>
		<script src="geo/geoiterator.js"></script>
		<script src="geo/dualprojection.js"></script>
		<script src="minimal/minimal.js"></script>
		<script src='icon/icon.js'></script>
		<script src='icon/lib/gear.js'></script>
		<script src='icon/lib/user.js'></script>
		<script src='icon/lib/spinner.js'></script>
		<script src='jslib/utils.js'></script>
		<script src='jslib/comm.js'></script>
		<script src="jslib/observer.js"></script>
		<script src="jslib/session.js"></script>
		<script src="jslib/cookie.js"></script>
		<script src="jslib/browserhistory.js"></script>
		<script src="topojson/topojson.min.js"></script>
		<script src="fx/keyboard.js"></script>
		<script src="fx/asset.js"></script>

		<script src='jslib/debug.js'></script>

		<script src="data/worldtopo.js"></script>  <!-- land and countries arcs -->
		<script src="data/treasure.js"></script>
		<script src="data/empire.js"></script>
		<script src="data/deserts.js"></script>
		<script src="data/highmountains.js"></script>
		<script src="data/lowmountains.js"></script>
		<script src="data/mediummountains.js"></script>
		<script src="data/rivers.js"></script>
	</head>

	<body>
		<!-- 
		Four overlaid fullscreen divs.
		Mouse/touch events target hud, bubble up to pad and window.
		Keyboard events target window.
		-->
		<div id='pad' class='full'>
			<div id='world' class='full'></div>
			<div id='hud' class='full'>
				<button g id='menubtn' open='sketch-palette'><img src='i/menu_black_24dp.png' title='menu'/></button>

				<div class='hud visible hidden' id='announce'>
					<div id='announcemsg'>announcements</div>
					<button id='announcedone'>OK</button>
				</div>

				<button g id='layerbtn' open='layermenu'><img src='i/layers_black_24.png' title='layers'/></button>
				<div class='hud visible' id='whereami'>
					<div id='hudlatlng'>&nbsp; </div>
					<div hidden id='hudgeo'></div>
					<div hidden id='hudpresentday'></div>
				</div>

				<div class='hud visible' id='chronometer'>
					<div class='hud visible hidden' id='timeslide'><input id='timeslider' type='range' /></div>
					<button g id='timeminusbtn'><img src='i/minus_black.png' alt='time back'/></button>
					<span id='time'>1300 BCE</span>	
					<button g id='timeplusbtn'><img src='i/plus_black.png' alt='forward'/></button>
				</div>


				<div class='hud visible' id='mapzoom'>
					<button g id='zoomplusbtn'><img src='i/plus_black.png' alt='zoom in'/></button><br/>
					<input id='mapzoomer' type='range' min='1' max='100' step='1' value='1' /><br/>
					<button g id='zoomminusbtn'><img src='i/minus_black.png' alt='zoom out'/></button>
				</div>
				<button g id='projectbtn'>
					<img id='globeimg' class='hidden' src='i/globe_black_24.png' title='globe'/>
					<img id='mercimg'                 src='i/mercator_black_24.png' title='mercator'/>
				</button>
			</div>
		</div>
		
		<!---- modeless dialogs ----------------------------------------->

		<aside initially hidden class='panel popup leftnav blu' id='settings-dialog'>
			<div><label for='menucheat'><input id='menucheat' type='checkbox' />Cheat (Alt-C)</label></div>
			<div><label for='menugraticule'><input id='menugraticule' type='checkbox' />Show Meridians</label></div>
			<div><label for='menupresentday'><input id='menupresentday' type='checkbox' />Show Present-Day Borders</label></div>
			<div><label for='menuhires'><input id='menuhires' type='checkbox' />Hi-Res (90MB Download)</label></div>
		</aside>
		<aside initially hidden class='panel popup leftnav blu' id='user-dialog'>
			<p><button close class='anchor' request='logout'        >Logout</button></p>
			<p><button close class='anchor' request='forgotpassword'>Forgot Password</button></p>
			<p><button close class='anchor' request='changeusername'>Change Username</button></p>
			<p><button close class='anchor' request='changepassword'>Change Password</button></p>
			<p><button close class='anchor' request='changeemail'   >Change Email</button></p>
			<p><button close class='anchor' nav='profile'  >User Profile</button></p>
		</aside>
		<nav initially hidden class='panel popup leftnav blu' id='sketch-palette'>
			<p>
				<button id='userbtn' open='user-dialog'><icon type='draw' name='user' class='bit'></icon></button>
				<button id='settingsbtn' open='settings-dialog'><icon type='draw' name='gear' class='bit'></icon></button>
			</p>
			<p><button close class='anchor' nav='profile'  >Color</button></p>
			<p><button close class='anchor' id='brushsizebtn' >Brush Size</button></p>
			<p><button close class='anchor' id='clear' >Clear   Esc</button></p>
			<p><input type='radio' id='point'  name='drawwhat'        /><label for='point'  > Point</label><p/> 
			<p><input type='radio' id='line'   name='drawwhat'        /><label for='line'   > Line</label><p/> 
			<p><input type='radio' id='poly'   name='drawwhat' checked/><label for='poly'   > Polygon</label><p/> 

			<p><button class='anchor' id='finish'>Finish</button></p>
			<p><button class='anchor' id='erase' >Erase</button></p>
			<p><button class='anchor' id='save'  >Save</button></p>
		</nav>
		<nav initially hidden class='panel popup leftnav blu' id='layermenu'>
			<div><span><input type='checkbox' checked id='layerwater'     name='baselayers' /><label for='layerwater'     > Oceans    </label></span>
				<button g id='waterpalettebtn' class='layerpalettebtn'><img src='i/palette_black_24.png'/></button></div> 
			<div><span><input type='checkbox' checked id='layerland'      name='baselayers' /><label for='layerland'      > Land      </label></span>
				<button g id='landpalettebtn' class='layerpalettebtn'><img src='i/palette_black_24.png'/></button></div> 
			<div><span><input type='checkbox' checked id='layerrivers'    name='baselayers' /><label for='layerrivers'    > Rivers    </label>
				<input type='checkbox' checked id='layeranimate'\></span>
				<button g id='riverspalettebtn' class='layerpalettebtn'><img src='i/palette_black_24.png'/></button></div> 
			<div><span><input type='checkbox' checked id='layerdeserts'   name='baselayers' /><label for='layerdeserts'   > Deserts   </label></span>
				<button g id='desertspalettebtn' class='layerpalettebtn'><img src='i/palette_black_24.png'/></button></div> 
			<div><span><input type='checkbox' checked id='layermountains' name='baselayers' /><label for='layermountains' > Mountains </label></span>
				<button g id='mountainspalettebtn' class='layerpalettebtn'><img src='i/palette_black_24.png'/></button></div> 
			<div><span><input type='checkbox' checked id='layergrid'      name='baselayers' /><label for='layergrid'      > Grid      </label></span>
				<button g id='gridpalettebtn' class='layerpalettebtn'><img src='i/palette_black_24.png'/></button></div> 
			<div><span><input type='checkbox'         id='layercountries' name='baselayers' /><label for='layercountries' > Countries </label></span>
				<button g id='countriespalettebtn' class='layerpalettebtn'><img src='i/palette_black_24.png'/></button></div> 
			<div><span><input type='checkbox'         id='layercities'    name='baselayers' /><label for='layercities'    > Cities    </label></span>
				<button g id='citiespalettebtn' class='layerpalettebtn'><img src='i/palette_black_24.png'/></button></div> 
			<div><span><input type='checkbox'         id='layerempire'    name='baselayers' /><label for='layerempire'    > Historical</label></span>
				<button g id='empirepalettebtn' class='layerpalettebtn'><img src='i/palette_black_24.png'/></button></div> 
			<div><span><b>Custom</b></span></div>
			<div><span><input type='checkbox'         id='layerempire'    name='baselayers' /><label for='layersketch'    > Sketch    </label></span>
				<button g id='sketchpalettebtn' class='layerpalettebtn'><img src='i/palette_black_24.png'/></button></div> 
			<div><span><button class='anchor' id='newlayer'>New...</a></span></div>
		</nav>

		<!---- modal dialog container and forms ----------------------------->

		<div hidden id='modalcontainer' class='full smoke'>
			<div class='centered modal'>
				<div close class='closex'>&times;</div>
				<h3 id='modaltitle'>Modal Title</h3>
				<p id='dialog-msg'></p>
				<div id='dialog'>
				</div>
				<div hidden id='wait' class='centered'>
					<icon type=draw name=spinner class='spin'></icon>
				</div>
			</div>
		</div>
		<div hidden id='offscreen'>
			<form modal id='login' svc='ua' class='dialog' title='Login to Your Account'>
				<p><input name='both' type='text' placeholder='Username or Email' autofocus required pattern='[a-zA-Z0-9_@.+]{6,100}' title='Letters and numbers or @ or period or underscore. Length between 6 and 100.'></p>
				<p><input name='pword' type='password' placeholder='Password' required pattern='[a-zA-Z0-9@&amp;#$%]{8,255}' title='Letters and numbers or @,&amp;,#,$,%. Length between 8 and 255.'></p>
				<p class='tright'>
					<input close type='button' value='Cancel' class='anchor' tabindex='-1'>
					<input type='submit' value='Login' class='submit'>
				</p>
				<p><input type='button' class='anchor' value='Forget your password?' open='forgotpassword'/></p>
			</form>
			<form modal id='register' svc='ua' class='dialog' title='Register a New Account'>
				<p><input name='uname' type='text' placeholder='Username' autofocus required pattern='[a-zA-Z0-9_@.+]{6,100}' title='Letters and numbers or @ or period or underscore. Length between 6 and 100.'></p>
				<p><input name='email' type='text' placeholder='Email' required pattern='[a-zA-Z0-9_@.+]{6,100}' title='Letters and numbers or @ or period or underscore. Length between 6 and 100.'></p>
				<p><input name='pword' type='password' placeholder='Password' required pattern='[a-zA-Z0-9@&amp;#$%]{8,255}' title='Letters and numbers or @,&amp;,#,$,%. Length between 8 and 255.'></p>
				<p><input name='pwordc' type='password' placeholder='Confirm Password' required pattern='[a-zA-Z0-9@&amp;#$%]{8,255}' title='Letters and numbers or @,&amp;,#,$,%. Length between 8 and 255.'></p>
				<p class='tright'>
					<input close type='button' value='Cancel' class='anchor' tabindex='-1'>
					<input type='submit' value='Register' class='submit'>
				</p>
			</form>
			<form modal id='verify' svc='ua' class='dialog' title='Verify Registration'>
				<p>A Temporary Identification Code has been sent to your email address.
				Enter it here along with your password to complete your registration.</p>
				<p><input name='tic' type='text' placeholder='Temporary Identification Code' autofocus required pattern='[a-zA-Z0-9]{6}'></p>
				<p><input name='pword' type='password' placeholder='Password' required pattern='[a-zA-Z0-9@&amp;#$%]{8,255}' title='Letters and numbers or @,&amp;,#,$,%. Length between 8 and 255.'></p>
				<p class='tright'>
					<input close type='button' value='Cancel' class='anchor' tabindex='-1'>
					<input type='submit' value='Verify' class='submit'>
				</p>
			</form>
			<form modal id='verifyemail' svc='ua' class='dialog' title='Verify New Email'>
				<p>A Temporary Identification Code has been sent to your new email address.
				Enter it here along with your password to complete your email change.</p>
				<p><input name='tic' type='text' placeholder='Temporary Identification Code' autofocus required pattern='[a-zA-Z0-9]{6}'></p>
				<p><input name='pword' type='password' placeholder='Password' required pattern='[a-zA-Z0-9@&amp;#$%]{8,255}' title='Letters and numbers or @,&amp;,#,$,%. Length between 8 and 255.'></p>
				<p class='tright'>
					<input close type='button' value='Cancel' class='anchor' tabindex='-1'>
					<input type='submit' value='Verify' class='submit'>
				</p>
			</form>
			<form modal id='forgotpassword' svc='ua' class='dialog' title='Forgot Password'>
				<p>You may reset your password.<br/>
				A Temporary Identification Code will be sent
				to the email address we have on file for you.</p>
				<p><input name='both' type='text' placeholder='Username or Email' autofocus required pattern='[a-zA-Z0-9_@.+]{6,100}' title='Letters and numbers or @ or period or underscore. Length between 6 and 100.'></p>
				<p class='tright'>
					<input close type='button' value='Cancel' class='anchor' tabindex='-1'>
					<input type='submit' value='Send Code' class='submit'>
				</p>
			</form>
			<form modal id='resetpassword' svc='ua' class='dialog' title='Reset Password'>
				<p>A Temporary Identification Code has been sent to your email address.
				Enter it here along with a new password.</p>
				<p><input name='tic' type='password' placeholder='Temporary Identification Code' required pattern='[a-zA-Z0-9]{6}'></p>
				<p><input name='pnew' type='password' placeholder='New Password' required pattern='[a-zA-Z0-9@&amp;#$%]{8,255}' title='Letters and numbers or @,&amp;,#,$,%. Length between 8 and 255.'></p>
				<p><input name='pnewc' type='password' placeholder='Confirm New Password' required pattern='[a-zA-Z0-9@&amp;#$%]{8,255}' title='Letters and numbers or @,&amp;,#,$,%. Length between 8 and 255.'></p>
				<p class='tright'>
					<input close type='button' value='Cancel' class='anchor' tabindex='-1'>
					<input type='submit' value='Change' class='submit'>
				</p>
			</form>
			<form modal id='changepassword' svc='ua' class='dialog' title='Change Password'>
				<p><input name='pword' type='password' placeholder='Old Password' required pattern='[a-zA-Z0-9@&amp;#$%]{8,255}' title='Letters and numbers or @,&amp;,#,$,%. Length between 8 and 255.'></p>
				<p><input name='pnew' type='password' placeholder='New Password' required pattern='[a-zA-Z0-9@&amp;#$%]{8,255}' title='Letters and numbers or @,&amp;,#,$,%. Length between 8 and 255.'></p>
				<p><input name='pnewc' type='password' placeholder='Confirm New Password' required pattern='[a-zA-Z0-9@&amp;#$%]{8,255}' title='Letters and numbers or @,&amp;,#,$,%. Length between 8 and 255.'></p>
				<p class='tright'>
					<input close type='button' value='Cancel' class='anchor' tabindex='-1'>
					<input type='submit' value='Change' class='submit'>
				</p>
			</form>
			<form modal id='changeusername' svc='ua' class='dialog' title='Change Username'>
				<p><input name='uname' type='text' placeholder='New Username' autofocus required pattern='[a-zA-Z0-9_@.+]{6,100}' title='Letters and numbers or @ or period or underscore. Length between 6 and 100.'></p>
				<p><input name='pword' type='password' placeholder='Re-enter Password' required pattern='[a-zA-Z0-9@&amp;#$%]{8,255}' title='Letters and numbers or @,&amp;,#,$,%. Length between 8 and 255.'></p>
				<p class='tright'>
					<input close type='button' value='Cancel' class='anchor' tabindex='-1'>
					<input type='submit' value='Change' class='submit'>
				</p>
			</form>
			<form modal id='changeemail' svc='ua' class='dialog' title='Change Email'>
				<p><input name='email' type='text' placeholder='New Email' required pattern='[a-zA-Z0-9_@.+]{6,100}' title='Letters and numbers or @ or period or underscore. Length between 6 and 100.'></p>
				<p><input name='pword' type='password' placeholder='Re-enter Password' required pattern='[a-zA-Z0-9@&amp;#$%]{8,255}' title='Letters and numbers or @,&amp;,#,$,%. Length between 8 and 255.'></p>
				<p class='tright'>
					<input close type='button' value='Cancel' class='anchor' tabindex='-1'>
					<input type='submit' value='Change' class='submit'>
				</p>
			</form>
			<image id='yellow-dot' src='i/yellow-dot-lg-n.gif' />
		</div>
	</body>
</html>
